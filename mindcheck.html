<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checklist</title>
<style>
  /* ğŸ¨ ---- COLOR MACROS ---- */
  :root {
    --bg-dark: #151515;
    --bg-white: #ffffff;
    --text-dark: #151515;
    --text-light: #ffffff;
    --color-green: #9ee886;
    --color-red: #ef6f67;
    --color-gray: #aaaaaa;
  }

  /* ğŸ¨ ---- GLOBAL ---- */
  body {
    width: 50%;
    font-family: 'Arial', sans-serif;
    background-color: var(--bg-dark);
    margin: 0;
    padding: 0;
  }

  /* ğŸ¨ ---- TITLE ---- */
  h2 {
    margin: 0;
    text-align: right; /* é å³å¯¹é½ */
    font-size: 2rem;
    font-weight: bold;
    padding: 12px 15px;
    transition: background-color 0.3s ease, color 0.3s ease;
    background-color: var(--bg-dark);
    color: var(--text-light);
  }

  .category {
    margin-bottom: 0;
  }

  /* ğŸ¨ ---- LIST ---- */
  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  li, .reflection {
    width: 100%;
    padding: 20px 25px;
    margin: 0;
    font-size: 2.5rem;
    font-weight: bold;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    user-select: none;
    transition: all 0.3s ease;
    cursor: pointer;
    border-radius: 0;
  }

  li {
    background-color: var(--bg-dark);
    color: var(--text-light);
  }

  li:hover {
    filter: brightness(1.2);
  }

  /* ğŸ¨ ---- REFLECTION ---- */
.reflection {
  background-color: var(--neutral);
  color: var(--bg-dark);
  min-height: 80px;
  align-items: flex-start;
  font-size: 1.5rem;
  padding-top: 15px;
  overflow-wrap: break-word;  /* è¶…é•¿å•è¯è‡ªåŠ¨æ¢è¡Œ */
  word-break: break-word;     /* å…¼å®¹æ€§æ›´å¥½ */
  white-space: pre-wrap;      /* ä¿ç•™è¾“å…¥çš„æ¢è¡Œ */
  display: block;           /* ä¿è¯çºµå‘æ’åˆ— */
  overflow: auto;
}


  /* Placeholder é¢œè‰²ï¼ˆæ¨¡æ‹Ÿï¼‰ */
  .reflection[data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: var(--color-gray);
  }
</style>
</head>
<body>

<div class="category">
  <h2>Mind</h2>
  <ul>
    <li>Slept 7+ hours</li>
    <li>Ate real food today</li>
    <li>Work out 30minï¼‹</li>
    <li>Doom scrolling 10min-</li>
    <li>Did something that felt good</li>
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>


<div class="category">
  <h2>School / Career</h2>
  <ul>
    <li>Checked deadlines & warnings</li>
    <li>Contacted teacher / advisor</li>
    <li>Reviewed project status</li>
    <li>Planned/Reviewed weekly priority</li>
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>


<div class="category">
  <h2>Space</h2>
  <ul>
    <li>Cleaned desk / one corner</li>
    <li>Laundry under control</li>
    <li>Organized files</li>
    <li>No stinky things indoor</li>
    <li>No stinky things on clothes</li>
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>


<div class="category">
  <h2>Relationships</h2>
  <ul>
    <li>Good talk</li>
    <li>No JKYFHKGV Talks</li>
    <li>No Angry Talk</li>
    <li>Ask for good time</li>
    <li>Good time</li>
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>

<div class="category">
  <h2>Growth</h2>
  <ul>
    <li>Still care about art / tech / modeling</li>
    <li>Created for fun this week</li>
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>

<div class="category">
  <h2>Extra</h2>
  <ul>
    <li>Read or learned something new</li>
    <li>Exercise seriously</li>
    <li>Chat 10minï¼‹</li>
    
  </ul>
  <div class="reflection" contenteditable="true" data-placeholder="Write your reflection here..."></div>
</div>











<script>
  // ğŸ¯ Reflectioné€»è¾‘
  document.querySelectorAll('.reflection').forEach(ref => {
    ref.addEventListener('input', () => {
      const filled = ref.textContent.trim() !== '' && ref.textContent !== ref.dataset.placeholder;
      ref.style.backgroundColor = filled ? 'var(--color-green)' : 'var(--bg-dark)';
      ref.style.color = filled ? 'var(--text-dark)' : 'var(--text-light)';
    });
  });

  // ğŸ¯ Taskç‚¹å‡»é€»è¾‘
  document.querySelectorAll('.category').forEach(category => {
    const tasks = category.querySelectorAll('li');
    const title = category.querySelector('h2');

    tasks.forEach(task => {
      let clickState = 0;
      task.dataset.clicked = 0;

      task.addEventListener('click', () => {
        clickState = (clickState + 1) % 3;
        task.dataset.clicked = 1;

        if (clickState === 1) {
          task.style.backgroundColor = 'var(--color-green)';
          task.style.color = 'var(--text-dark)';
        } else if (clickState === 2) {
          task.style.backgroundColor = 'var(--color-red)';
          task.style.color = 'var(--text-light)';
        } else {
          task.style.backgroundColor = 'var(--bg-dark)';
          task.style.color = 'var(--text-light)';
        }

        const allClicked = Array.from(tasks).every(t => t.dataset.clicked === '1');
        title.style.backgroundColor = allClicked ? 'var(--color-green)' : 'var(--bg-dark)';
        title.style.color = allClicked ? 'var(--text-dark)' : 'var(--text-light)';
      });
    });
  });
</script>
<script>
  // ğŸ¯ è·å–å½“å¤©æ—¥æœŸ
  const getTodayStr = () => {
    const now = new Date();
    const pad = n => n.toString().padStart(2, '0');
    return `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}`;
  };

  // ğŸ¯ ä»ç¼“å­˜åŠ è½½
  window.addEventListener('DOMContentLoaded', () => {
    const saved = localStorage.getItem('checklistData');
    const savedDate = localStorage.getItem('checklistDate');
    const today = getTodayStr();

    if (saved && savedDate === today) {
      const data = JSON.parse(saved);
      document.querySelectorAll('.category').forEach(category => {
        const title = category.querySelector('h2').textContent;
        if (data[title]) {
          const tasks = category.querySelectorAll('li');
          tasks.forEach((task, i) => {
            const statusMatch = data[title].tasks[i].match(/\[(.*?)\]$/);
            const status = statusMatch ? statusMatch[1] : 'unchecked';
            let color = '';
            if (status === 'yes') {
              color = 'green';
              task.dataset.clicked = '1';
              task.dataset.state = '1';
              task.style.backgroundColor = 'var(--color-green)';
              task.style.color = 'var(--text-dark)';
            } else if (status === 'no') {
              color = 'red';
              task.dataset.clicked = '1';
              task.dataset.state = '2';
              task.style.backgroundColor = 'var(--color-red)';
              task.style.color = 'var(--text-light)';
            } else {
              task.dataset.clicked = '0';
              task.dataset.state = '0';
              task.style.backgroundColor = 'var(--bg-dark)';
              task.style.color = 'var(--text-light)';
            }
          });
          const reflection = category.querySelector('.reflection');
          reflection.textContent = data[title].reflection || '';
          reflection.dispatchEvent(new Event('input'));
        }
      });
    } else {
      localStorage.removeItem('checklistData');
      localStorage.setItem('checklistDate', today);
    }
  });

  // ğŸ¯ ä¿å­˜åˆ°ç¼“å­˜
  const saveToCache = () => {
    let exportData = {};
    document.querySelectorAll('.category').forEach(category => {
      const title = category.querySelector('h2').textContent;
      const tasks = Array.from(category.querySelectorAll('li')).map(task => {
        let status = 'unchecked';
        if (task.dataset.state === '1') status = 'yes';
        else if (task.dataset.state === '2') status = 'no';
        return `${task.textContent} [${status}]`;
      });
      const reflection = category.querySelector('.reflection').textContent.trim();
      exportData[title] = { tasks, reflection: reflection || '' };
    });
    localStorage.setItem('checklistData', JSON.stringify(exportData));
    localStorage.setItem('checklistDate', getTodayStr());
  };

  // ğŸ¯ ç‚¹å‡»æ—¶ç«‹å³ä¿å­˜
  document.querySelectorAll('li').forEach(task => {
    task.addEventListener('click', () => {
      const current = parseInt(task.dataset.state || '0');
      const next = (current + 1) % 3;
      task.dataset.state = next;

      if (next === 1) {
        task.style.backgroundColor = 'var(--color-green)';
        task.style.color = 'var(--text-dark)';
      } else if (next === 2) {
        task.style.backgroundColor = 'var(--color-red)';
        task.style.color = 'var(--text-light)';
      } else {
        task.style.backgroundColor = 'var(--bg-dark)';
        task.style.color = 'var(--text-light)';
      }

      saveToCache();
    });
  });

  // ğŸ¯ åæ€è¾“å…¥ä¿å­˜
  document.querySelectorAll('.reflection').forEach(ref =>
    ref.addEventListener('input', saveToCache)
  );

  // â° æ¯åˆ†é’Ÿæ£€æŸ¥æ—¥æœŸï¼Œè·¨å¤©è‡ªåŠ¨æ¸…ç©º
  setInterval(() => {
    const savedDate = localStorage.getItem('checklistDate');
    const today = getTodayStr();
    if (savedDate !== today) {
      localStorage.removeItem('checklistData');
      localStorage.setItem('checklistDate', today);
      location.reload();
    }
  }, 60 * 1000);
</script>





</body>





<!-- ğŸ¯ Export Button -->
<div style="padding: 20px; text-align: center;">
  <button id="exportBtn" style="
    font-size: 1.8rem;
    padding: 10px 20px;
    background-color: var(--color-green);
    color: var(--text-dark);
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
  ">Export Checklist</button>

  <a href="ThingsSort.html"
     style="
       font-size: 1.8rem;
       padding: 10px 20px;
       background-color: var(--color-gray);
       color: var(--text-dark);
       border-radius: 8px;
       text-decoration: none;
       font-weight: bold;
       margin-left: 15px;
       display: inline-block;
     ">
    ThingsList
  </a>
</div>

<script>
document.getElementById('exportBtn').addEventListener('click', () => {
  try {
    let exportData = {};

    document.querySelectorAll('.category').forEach(category => {
      const title = category.querySelector('h2').textContent;
      const tasks = Array.from(category.querySelectorAll('li')).map(task => {
        let status = 'unchecked';
        // âœ… ç”¨ state æ¥åˆ¤æ–­
        const state = task.dataset.state || '0';
        if (state === '1') status = 'yes';
        else if (state === '2') status = 'no';
        return `${task.textContent} [${status}]`;
      });

      const reflection = category.querySelector('.reflection').textContent.trim();
      exportData[title] = { tasks, reflection: reflection || '' };
    });

    const now = new Date();
    const pad = n => n.toString().padStart(2, '0');
    const filename = `checklist_${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}_${pad(now.getHours())}-${pad(now.getMinutes())}.json`;

    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);

    alert("âœ… æ–‡ä»¶å·²ä¿å­˜åˆ°æœ¬åœ°ï¼");
  } catch (err) {
    console.error(err);
    alert(`âŒ é”™è¯¯ï¼š${err.message}`);
  }
});

</script>



</html>

